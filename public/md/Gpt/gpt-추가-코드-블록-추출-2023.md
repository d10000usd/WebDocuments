# **<span style="font-size: 35px; font-style: italic;">추가 코드 블록 추출</span>**

분리된 함수를 사용하여 마크다운에서 코드 블록을 추출하는 방법은 다음과 같습니다. 우선, `fetchMarkdown` 함수에서 코드 블록 추출 로직을 분리하겠습니다.

```typescript
function extractCodeBlocks(rawData: string): RegExpMatchArray | null {
    const codeBlockRegex = /```[\s\S]*?```/g;
    const codeBlocks = rawData.match(codeBlockRegex);
    return codeBlocks;
}

export async function fetchMarkdown(url: string): Promise<any | undefined> {
    try {
        const response = await fetch(url);
        const rawData = await response.text();

        const codeBlocks = extractCodeBlocks(rawData);

        if (!codeBlocks) {
            // Code blocks not found
            console.log("No code blocks found in the markdown.");
        }

        const ddt = {
            'api': "local",
            'path': "indi",
            'repeatCount': 2,
            'rowtype': 1,
        };

        const msg = {
            'WebDocuments': rawData,
            'codeblock': codeBlocks || [], // Initialize as an empty array if codeBlocks is null
            'check': ddt
        };

        console.log(msg);
        return msg;
    } catch (error) {
        console.error(error);
        return undefined;
    }
}
```

In this code, the logic for extracting code blocks has been separated into the `extractCodeBlocks` function. This makes the code more modular and easier to maintain. The `extractCodeBlocks` function takes the `rawData` as input and returns the extracted code blocks. The `fetchMarkdown` function then calls this helper function and processes the code blocks accordingly. If code blocks are not found, it initializes `codeBlocks` as an empty array.
*****

